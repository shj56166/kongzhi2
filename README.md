SPP Control: Automation & Terminal
一款专为电子爱好者与开发者打造，集图形化控制、后台自动化、底层调试于一体的 SPP 经典蓝牙多功能安卓应用。

概览
这个项目旨在解决与 SPP 蓝牙模块（如 HC-05, HC-06）交互时的常见痛点。它提供了一个直观、现代的用户界面来控制多路继电器等设备，同时集成了强大的后台服务，以确保定时任务在任何情况（息屏、后台、设备休眠）下都能被精准触发。此外，专为开发者设计的指令终端，使其成为一个强大的蓝牙协议调试工具。

✨ 核心功能
⚡️ 多路动态控制 (Dynamic Multi-Channel Control)

根据需要动态添加、编辑和删除控制卡片。

为每个开关独立配置名称和对应的16进制指令。

所有配置自动保存在本地，实现高度个性化。

🕒 精准后台定时 (Precise Background Timing)

支持“倒计时”和“定时预约”两种模式。

利用 Android 系统的 AlarmManager 和前台服务，确保任务在 App 退至后台、息屏甚至设备重启后依然能被精准唤醒和执行。

🔄 高频自动循环 (High-Frequency Auto-Cycling)

为单个设备开启自动循环模式，自由调节开关频率（1-20次/秒）。

适用于设备测试、产品老化实验或任何需要快速脉冲信号的场景。

⌨️ 底层指令调试 (Low-Level Command Terminal)

专为开发者设计的全功能调试界面。

支持以 HEX（16进制）或 Text（文本）格式直接收发数据。

实时查看带有精确时间戳的原始数据流，是开发和验证蓝牙通信协议的强大工具。

📚 全面操作日志 (Comprehensive Logging)

自动记录蓝牙连接/断开、数据收发、系统错误等所有关键操作。

提供清晰的分类和精确到毫秒的时间戳，便于问题追溯与故障定位。

🛠️ 技术栈与架构解析
本应用采用现代 Android 混合开发模式，将 Web 技术的灵活与原生功能的强大深度融合，实现了高性能与高效率的统一。

1. 前端 (UI Layer)
技术: HTML5, CSS3, JavaScript

UI库: Material Web Components

实现: 整个用户界面运行在 Android 原生的 WebView 组件中。这种方式使得UI的开发和迭代速度极快，并且能够轻松实现流畅、现代的设计效果。

2. 原生后端 (Logic Layer - Kotlin)
应用的核心逻辑由原生 Kotlin 代码驱动，确保了功能的稳定和高效。

BluetoothService.kt: 应用的“心脏”。它是一个 Foreground Service（前台服务），被赋予高系统优先级，确保在 App 退至后台或锁屏后，蓝牙连接依然保持活动。它管理着蓝牙的连接、数据读写的所有线程，并作为定时任务的最终执行者。

AlarmReceiver.kt: 专用于接收由系统 AlarmManager 在精确时间点发出的“闹钟”广播。一旦接收到广播，它会立即唤醒 BluetoothService 去执行预设指令，这是实现精准、可靠后台定时任务的关键。

MainActivity.kt: 作为应用的主活动页，它承载着 WebView，处理系统权限请求，并作为原生后端与前端UI之间的“协调员”。

3. 通信桥梁 (Bridge)
前端与后端通过一套高效的双向通信机制协同工作：

JS → Native: 前端通过 window.BTBridge 对象（由原生层通过 @JavascriptInterface 注入）直接调用 Kotlin 函数，如下达发送数据指令 BTBridge.sendData("A0...")。

Native → JS: 原生层通过发送广播（Broadcast）来通知状态变化。MainActivity 接收到广播后，通过 WebView.evaluateJavascript(...) 执行相应的全局 JS 函数（如 window.onConnectionStateChange(...)），从而将原生事件实时反馈到 UI 上。

🚀 使用说明
连接设备

打开 App，点击右下角的蓝牙悬浮按钮。

App 会自动查找并连接名为 "HCW" 的已配对蓝牙设备。

连接成功后，顶部的状态指示灯将变为绿色。

主控界面

添加设备: 点击底部的“添加继电器”按钮。

编辑设备: 点击任意卡片右上角的“编辑”图标，可以修改名称、开关指令等。

手动控制: 直接点击卡片上的“开启”或“关闭”按钮发送指令。

展开高级功能: 点击卡片右上角的“展开”图标，可以进入高级设置。

设置定时任务

在卡片的高级设置中，找到“定时任务”模块。

选择模式: 在“倒计时”和“定时预约”之间切换。

设定时间:

倒计时: 滚动选择分钟和秒。

定时预约: 点击输入框选择一个具体时间。

设定动作: 选择时间到达后是“开启”还是“关闭”。

启动任务: 点击“设置任务”按钮。任务将被发送到后台服务，即使退出APP依然有效。

取消任务: 启动后，会在卡片下方显示任务状态，可随时点击“取消”。

使用指令调试

切换到“调试”页面。

发送数据: 在底部输入框输入 HEX 或文本指令，点击发送按钮。

切换格式: 点击左下角的仪表盘图标，可以分别设置发送和接收的数据格式。

查看收发: 界面会像聊天窗口一样实时显示所有发送和接收的数据流。

👤 关于作者
作者: 拿铁咖啡不加奶

AI协作: Gemini

简介: 这是一个由16岁初中生在2025年7月，借助 AI 协作完成的第一个安卓项目。

联系方式: QQ 1570666721 / Email shj561661@outlook.com

❤️ 支持与开源
如果这个项目对您有帮助，或者您欣赏这份探索精神，欢迎通过以下方式支持我。您的鼓励是我持续更新和创作的最大动力！

在 GitHub 上给我一个 ⭐ Star！

📄 许可证
本项目采用 MIT License 开源。
